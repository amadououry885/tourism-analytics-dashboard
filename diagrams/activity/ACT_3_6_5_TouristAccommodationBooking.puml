@startuml Tourist Accommodation Booking Activity

title Figure 3.X: Tourist Accommodation Booking Activity Diagram

skinparam backgroundColor #FEFEFE
skinparam ActivityBackgroundColor #E3F2FD
skinparam ActivityBorderColor #1976D2
skinparam ActivityDiamondBackgroundColor #FFF9C4
skinparam ActivityDiamondBorderColor #F57F17
skinparam ArrowColor #333333

|#LightBlue|Tourist|
|#E8F5E9|System|
|#FFE0B2|Stay Owner|
|#E1BEE7|External Platform|

|Tourist|
start
:Navigate to Stays Page;
:Enter Search Criteria
- Destination
- Check-in/Check-out
- Number of Guests;

|System|
:Fetch Available Accommodations;
:Display Stays List
(Internal + External);

|Tourist|
:Apply Filters
- Type (Hotel, Homestay...)
- Price Range
- Amenities;

|System|
:Filter Stays;
:Display Results with Badges
üè† "Direct Booking"
üîó "Via Booking.com";

|Tourist|
:Browse Results;
:Select Accommodation;

|System|
:Fetch Stay Details
- Images, Description
- Amenities, Rating
- Contact Info
- Booking URLs;
:Display Full Profile;

|Tourist|
:Review Accommodation;

if (is_internal = True?) then (Direct Booking)
    |Tourist|
    :View Contact Options
    - Email
    - Phone
    - WhatsApp;
    
    :Choose Contact Method;
    
    switch (Contact Method?)
    case (WhatsApp)
        |System|
        :Open WhatsApp with
        Pre-filled Message;
        
        |Tourist|
        :Send Inquiry to Owner;
        
        |Stay Owner|
        :Receive WhatsApp Message;
        :Reply with Availability
        and Pricing;
        
        |Tourist|
        :Negotiate Terms;
        :Confirm Booking
        (Off-Platform);
        
    case (Email)
        |System|
        :Open Email Client
        with Stay Details;
        
        |Tourist|
        :Send Email Inquiry;
        
        |Stay Owner|
        :Receive Email;
        :Reply with Details;
        
    case (Phone)
        |System|
        :Display Phone Number;
        
        |Tourist|
        :Call Stay Owner;
        
        |Stay Owner|
        :Answer Call;
        :Discuss Availability;
    endswitch
    
    |Tourist|
    :Complete Booking
    via Direct Contact;
    
else (External Platform)
    |Tourist|
    :View Booking Options
    - Booking.com
    - Agoda;
    
    :Select Platform;
    
    |System|
    :Track Click for Analytics;
    :Open External URL
    in New Tab;
    
    |External Platform|
    :Display Property Page;
    
    |Tourist|
    :Select Dates and Rooms;
    :Enter Guest Details;
    :Enter Payment Information;
    :Confirm Booking;
    
    |External Platform|
    :Process Booking;
    :Send Confirmation Email;
    
    |Tourist|
    :Receive Booking Confirmation
    from External Platform;
endif

' === COMPARE & SAVE ===
|Tourist|
:Save to Favorites (Optional);

|System|
:Store in localStorage;

|Tourist|
:Compare Multiple Stays
(Price, Rating, Amenities);

:Make Final Decision;

stop

@enduml
